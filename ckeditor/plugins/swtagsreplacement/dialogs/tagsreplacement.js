(function(){	/**	 Можно будет расширить диалог 'add' и 'edit' командами.	 * @param {Object} editor	 * @param {String} command	The command name which indicate what the current command is.	 */	function swtagreplacementDialog( editor, command )	{		function load_tagsrepl_combo(dialog,event)		{			var tags_template = editor.getSwTagsTemplate(),				tags_event = editor.getSwTagsEvent(event),				tagsreplacement_combo = dialog.getContentElement('tagsreplacement_tab1','tagsreplacement_combo'),				i;			if ( Ext.isArray(tags_template) )			{				for(i = 0; i < tags_template.length; i++ )				{					tagsreplacement_combo.add(tags_template[i].getDisplay(), tags_template[i].getTag());				}			}			if ( Ext.isArray(tags_event) )			{				for(i = 0; i < tags_event.length; i++ )				{					tagsreplacement_combo.add(tags_event[i].getDisplay(), tags_event[i].getTag());				}			}		}		var title = 'Вставить тег для подстановки данных';				var dialog = {			title : title,			minWidth : 400,			minHeight : 200,			onLoad : function()			{				load_tagsrepl_combo(this,'EvnVizitPL');			},			onShow : function()			{			},			onOk: function() {				var tagreplacement = this.getContentElement('tagsreplacement_tab1','tagsreplacement_combo').getInputElement().getValue();				if ( command == 'add' )				{					this._.editor.insertHtml(tagreplacement);				}			},			onHide : function()			{			},			contents : [{				id : 'tagsreplacement_tab1',				label : 'Параметры тега для подстановки данных',				title : 'Параметры тега для подстановки данных',				expand:true,				padding:0,				elements : [{					type:'vbox',padding:1,children:[{						type:'select',						id:'tagsreplacement_combo',						style:'width: 100%;',						label:'Выберите тег',						'default': '',						items:						[							[editor.lang.common.notSet , '']						]					}]				}]			}]			//,buttons:[CKEDITOR.dialog.okButton]		};		return dialog;	}	CKEDITOR.dialog.add('swtagreplacement_add', function(editor) {		return swtagreplacementDialog(editor,'add');	});	/*	CKEDITOR.dialog.add('swtagreplacement_edit', function(editor) {		return swtagreplacementDialog(editor,'edit');	});*/})();